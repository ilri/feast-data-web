
DROP VIEW IF EXISTS export_respondent ;

CREATE  VIEW export_respondent AS select now() AS export_time,respondent.id_user AS user_id,respondent.uploaded_at AS uploaded_at,respondent.keep_private AS private,respondent.exclude AS excluded,project.id AS project_id,getalias(project.id,'project','title',project.title) AS project_title,site.id AS site_id,getalias(site.id,'site','name',site.name) AS site_name,currency.id AS currency_id,currency.name AS currency_name,currency.default_usd_exchange_rate AS currency_default_usd_exchange_rate,world_region.id AS site_world_region_id,world_region.name AS site_world_region_name,country.id AS site_country_id,country.name AS site_country,focus_group.id AS focus_group_id,gender.description AS respondent_head_of_household_gender,focus_group.meeting_date_time AS focus_group_meeting_date_time,focus_group.community AS focus_group_community,focus_group.households_total AS focus_group_households,focus_group.households_average_members AS focus_group_households_average_members,respondent.id AS respondent_id,respondent.id_gender_head_of_household AS respondent_head_of_household_gender_id,respondent.interview_date AS respondent_interview_date,respondent.age AS respondent_age,respondent_gender.id AS respondent_gender_id,respondent_gender.description AS respondent_gender_description,respondent.head_of_household_is_respondent AS respondent_head_of_household_is_respondent,respondent.head_of_household_age AS respondent_head_of_household_age,respondent.head_of_household_occupation AS respondent_head_of_household_occupation,respondent.organization_affiliation AS respondent_organization_affiliation,respondent.community AS respondent_community,community_type.id AS community_type_id,community_type.description AS community_type_description,respondent_country.id AS respondent_country_id,respondent_country.name AS respondent_country_name,landholding_category.id AS landholding_category_id,landholding_category.description AS landholding_category_description,unit_area.id AS unit_area_id,unit_area.name AS unit_area_name,respondent.land_under_cultivation AS respondent_land_under_cultivation,respondent.diet_percent_collected_fodder AS respondent_diet_percent_collected_fodder,respondent.diet_percent_grazing AS respondent_diet_percent_grazing,respondent.diet_percent_cultivated_fodder AS respondent_diet_percent_cultivated_fodder,respondent.diet_percent_crop_residue AS respondent_diet_percent_crop_residue,respondent.diet_percent_purchased_feed AS respondent_diet_percent_purchased_feed from ((((((((((((respondent left join gender on((gender.id = respondent.id_gender_head_of_household))) left join gender respondent_gender on((respondent_gender.id = respondent.id_gender))) left join focus_group on((focus_group.id = respondent.id_focus_group))) left join site on((site.id = focus_group.id_site))) left join currency on((currency.id = site.id_currency))) left join project on((project.id = site.id_project))) left join country on((country.id = site.id_country))) left join world_region on((world_region.id = country.id_world_region))) left join community_type on((community_type.id = respondent.id_community_type))) left join country respondent_country on((respondent_country.id = respondent.id_country))) left join landholding_category on((landholding_category.id = respondent.id_landholding_category))) left join unit_area on((unit_area.id = respondent.id_unit_area)));
